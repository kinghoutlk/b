/*
全品类优惠券29减8
自动预约茅台 执行时间大家自己改下
脚本兼容: QuantumultX, Surge,Loon, JSBox, Node.js
=================================Quantumultx=========================
[task_local]
#全品类优惠券29减8
0 55 * * * * https://github.com/JDWXX/jd_job/blob/master/ms/jd_jdjsb_10_4.js, tag=全品类优惠券29减8, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/jd.png, enabled=true
=================================Loon===================================
[Script]
cron "0 55 * * * *" script-path=https://github.com/JDWXX/jd_job/blob/master/ms/jd_jdjsb_10_4.js,tag=全品类优惠券29减8
===================================Surge================================
全品类优惠券29减8 = type=cron,cronexp="0 55 * * * *",wake-system=1,timeout=3600,script-path=https://github.com/JDWXX/jd_job/blob/master/ms/jd_jdjsb_10_4.js
====================================小火箭=============================
全品类优惠券29减8 = type=cron,script-path=https://github.com/JDWXX/jd_job/blob/master/ms/jd_jdjsb_10_4.js, cronexpr="0 55 * * * *", timeout=3600, enable=true
 */
const $ = new Env('全品类优惠券29减8');
console.log("\n活动地址 https://u.jd.com/BCJekXm\n")
var _0xod2='jsjiami.com.v6',_0xod2_=['‮_0xod2'],_0x2280=[_0xod2,'w5IaVQ==','LkVXNg==','wrXDoMO2OcOl','wqrDh0Z6BA==','MmjDlBTDqcOwwqUFWsK0wrpBegXCmMKbOMKzHzwGwrBqVi0vwqELw4oyXwMTw5EVw6lSwqjCnMOPw6nDnEk=','wpHDs0J8NGQ=','TCtfYsKWXX5OwrfDh8KidcKwwpbCgHY=','w4jDgCQ=','wqbDoOaIqOiluOW/pOS8j+awr+aIoOaJkeS5luW5q++8oeiEruaejOS6lOaJp+ihm+S6pW1g','YQvDvA==','P1jCnsO7VA==','EcODwrVlwp/DmsOWwoo=','w4bCnkvDohU=','wpbDsx8=','GsOJwqY=','U8KEBw7CrcO7albDisKzw5rDiXvjgqPku5XkuLrml6nplITmoL/lhKnjgIjDmRvCvA9GKMOVw7vDq0dtYMKhVsOh','X8OGHUbCmA==','P2oaAWwiNsOYwppawqPDlgVkwrJTWMKYEMKtwrnDgyhQwpPCtVVgVcO3KCHCrkzDvAPDh8KXXWvCrhXDucKWR2HDljdJeQczP8Kew5jDosKHw6fCo8OPwofCmDvDuF0Ofh9xQcKCw57DtDdawqnCkDbClsKBw6tqwpjDmMOaesO4wro2OWLDoBrDvxVqwrcPJ8OOw5LDksKVw5XCjAzDoynDq8KQwp1qC8O+fcOYEsKzw4Bnwr1taV3Dt8KANi91w7HDqSPDlBPCjA==','w5XCu2DDiyc=','wo5MIEDDkQ==','AMKUNsOowrTDnQlEN8KZRFQ6w7k9AsK0wrvDicOTeTJiMcO2esKRwpwqwpdbVcOKdinDgsOGw7M3wojCjsKOXAp+wqgoEcObwr7CuMOhJDAGw6h6wo/DvUXDoAM+XA==','w5vDigXDtRw=','w6tnFQY9','Z30rw6op','dmEow70X','w5XCvH3DqT4=','ZcKcw4bCjg==','VsKgIjzCvA==','bMKwJgHCgw==','FcKZwqU8w7XDoR7DsVTChX9j','w4bCoF3Dog==','w41uCcK4G1IQ','Z2g9','CMOPbyXDowHCg8OU','w4zDtSg1Wg==','w7TDjgJXw6BlwrHChg==','fcOZKA==','w7zCplvDqws=','EXTDrcKpRg==','wpFXBU3DrQ==','cQ3DsE/Dhg==','wpTDgsOXF8Og','w6jCr0fCtXo=','w4xkD8KpE1wd','wq7DlgAWw4Y=','w7TDrS19w70=','wp3Cpg8Fw4E=','wqnDpcO8McOa','56+35byP5par6Zen5aaC5Lqpw4TDsD7DkMOrw77npYzvvJHljp/lso/mlLbvv67vvpbnu6bmrJjovLDoorxK','cMKoNQ==','5Yah5ZOv57C/5LyU5oG/5YmHTHDlhrfCjg==','w5fDmiEnRlDClHjDoG0=','VMKLwpswwpsLwqM=','b0AADcKz','wonDu8OSC8OB','w6zCp2rCk2c=','RhTDucKlHg==','w7LCpG3CkXk6w4Fu','b8KyMBHCi8OpwrTCtsKAwq4=','L0Ifw7rCmA==','w5DCvkrChnE=','NcOWXQ==','Pw0wKsKm','UF4CDcK8','wpxgHmnDlg==','w6rDosKnw77Djg==','LWDDkMKCecOg','WMKCwo4jwrk=','LUZlw752','EH4jw4zCiQ==','w6nDuMKEw6jDgw==','YMOtPsKmwpI=','EEjCncOfYA==','w4DCpFDDssOt','HcOFwqnCiMK7','Ay41','w7zDomllwqBywpnlvZDlpbzjg5Xku7jkuIDotqbljKM=','QsOzOMKzwro=','bG8oCsK6NsKRw4s=','wq3Ds2lhHmAGw4Y=','TMOVFcOi','44GR5o+V56aE44O0bsOnOMOBw53DnOW1ouWmgOaVrQ==','KGvDmsKAdQ==','Lk1ZOFIlwrrCkQ==','Y+ispemEtuaVh+ebo+W9peiMsuWMsMK+w5TDrWDDkQ5LwrLCqcOSw4ooU8KlaMKZwroaLsKnw5rDo2HDjXlGScOBbsK6QMKWwqzDk8KGwpNjdMK2BjjCo8OiPw==','w6zDjRd6w7E=','w4XCmXfDnhcK','I8K1wovCmcOA','IcOgegnDkQ==','w7fDqh7DiCw=','w6YUGDLDisK2Q8KPwrst','wpjCqS4q','w4fDgCwPQFHltIPlpITml5sqwp0X','RMKHw4bCksOBUcOVNQ==','5Lua5Luw6Lex5Y65','ZArDv8KwNg==','L8O4Vw==','w4rDtcKww5U=','ZsKfw6XCosO7','E0LDtMKMWQ==','w7lGMcKULg==','dMKTw5LClsOV','wpA+YWfDkg==','T34PDcKB','w7YEBCTDocK3Q8KywrQ5S8OA','w7zDkAzCj8KM','S2Uww6kM','w4fCsVbDgsOj','w5xvKMKVKw==','w4nDpA57w7Q=','B0xeS8OI','w57CqXfDlSA=','MmLCnMOsTQ==','w6zDpC3DmAk=','RUrCusODGw==','wr3CpWUFw5I=','woHDi1xVHA==','UsOMBcKswpY=','wpkPdXvDrA==','w43ClGnCu3s=','wrXDucO9NsO7','AlvClcOoSg==','HcK0wrLCssOK','w6h9PSU=','w47Dp8Kyw54=','aMKvNzw=','V8K3MCLCtA==','w6BwYh5H','TD/DnnzDgw==','GMOEwqo=','5YSc5ZGq57K25L+15oCj5YmPw7I15YW7SQ==','YBHDjcKjIg==','USfDpMKDKsK/w4U=','WsKEw4HCkMOf','w5zCi1bDiBE=','w5lJKMKEFA==','aMKWwponwq0lwqhc','WFQGw6Eu','w5h1Yi14wr1ywr91FA==','b8K3OSDCpQ==','w7IUAhLDpcKtUg==','w5zDthLDkAw=','w5RiHjsA','dSxUwoVk','wq5LMErDqhMSEB3Dl18=','wpvCvRU5w6Y=','B8Kiwr0Bw7U=','wpHCrTcJw780w58Jw5LCpCY=','EcODwrVgwp/DgcOQwpE=','w5nDuwHCoMKywo/Dnmk=','w6vDnsKoasK/w6bCiArDqXI=','RHIHCMKF','HnVfU8O8','wrTDs0BfCg==','SDzDvsK7IA==','ZhDDt0TDrg==','w4zDmxPDiBo=','w7xRIXhU','w419LAAO','BcKJwrkqw57DoB7DjFvCkQ==','5Yaq5ZGK57OL5L2j5oGx5Yu3wrrChOWGlmI=','w47CpFDDssOt','w5jDtxvCicKxwpbDlQ==','SjvDnEXDpMOS','w5bCr392PmUlw4wGw7TCuAo=','w4JyNcKSHlQ=','w6cBLmjDnBARIhHDkwPCjcOU','N8OWXlbCvcKgMh/ClMOm','w7dwITg=','ZGk5JMKVNMKU','BGY9','J2dqdsOXRidX','RyDDhMKRCxpxEg==','w5MGVQ==','ZWM/BcKVI8Kd','GsOWVVjDucKjHS8=','w6TCuGfCiF4+w6ZPw6w=','fhtwwrFJwr3Dhg==','w73DpTJ4w4xCwpfCi0I=','wqTDosOcD8O0wr0=','AETCq8O3SWhPw7M=','agHDr8KdIS1WJg==','BWFaQ8ONAjkNw6vCgg==','w6vDnsKodMKzw6vCkhDDqHI=','w6bDpCTDjDrCosOw','KsOMWEDDpMK0','KnvDpRXDlQ==','woTCrTMjw6s7w5Y=','w5fDiDrCksK1','HlZXQcOmdg==','LQI3wqkewrXCn8K8JMKMY8OnLh4jw7ka','w5HDmcKcw7fDrg==','w5hxF8KUDg==','TSXDpWfDuQ==','TydlwpxQ','WhN0wrpd','YcONH8KMwrg=','XRtdwpNq','w73CuUDDkjw=','w41GISgY','w7xqLFBC','e8KiJh/CjcOhwr3CksKAwqxYDsKXwr7Cgg==','w5nDuwHCpcK0wpTDmW5/Zg==','Bm0/w4/CtsKcJMKkw6/Djw==','OV8yw77CtA==','wp3DuQwVw5jCkUta','wp98MRInwqUlwo41','cT9ST3N6','YsKEw4/CicO7','w67DmcKxw5zDuA==','w5nDrylew4pJwpDCqQ==','wp/DpXhVJW0Hw7oXw7zCrA==','e8KiJhbChcO5wrQ=','woNjKGDDpg==','YcOQMMK6wrs=','JETDlMKpew==','wq/Dni0gw5k=','wo3DmCIuw68=','F2l3JEs=','QDzDp8KnMQ==','N0nDhsKNYQ==','w7RBFwIv','6aGP5Y+45omU5YqT776e','wpEwMFQnw6k=','bXEHN8K3','6LWS5Y2cw7fjg70=','w7DmiZXkuqvlu4vliJfCrm7nvpbvvqlSwpXCrMOZwrwGw5TDn8Kc44KFw4R6ZcOMwozDqjvCvcOxwqnvv6jnnr/nv7nlhbjlkZp4','SsOADMO3wrPDnGdLFMKbTBQzw7VsEMKnw7rCn8KHdH0uesOUe8KKw5UnwpEPf8ONannDicOWwr9vworDmsODC3Q4wrl5RsO9wqTCs8ODKC0Ww7cxw5XDpyjCsFVtC3EQIsKiVcKvwrrDlsKEAcOdwofCksKy','w6HDmsKkCsK3w6/CmEPCvA==','fhDDqcK8LSwJOg8gwqobD8OicirCjERiAcOYHMKSFR1Tw5obwqsewpY=','ZcOxLA==','Vg0wwpMRNMKQClXDsQLCrhVLw5LCmsOzfcOiGUpVM8KRHmHCoBcdwo52w7DDnlBQwoXCjlICwrJf','G+aLkeigg+WHiueBrOaWp+mXjAvDgQ==','VuOAu+OAhuOCpeOAp+OAguOCpuaJkOigpOaUuumXi8KpCA==','wqfDh8O0I8OE','PcKawpA4w6Q=','b8OMPMOrwrU=','wozCuhgiwpYRwqLDtEPCosOsw6bDmyDCkcKzw7LDlMOZazvDlsOFcMOgMsKHw7wOAEZGScOkZMKWH8KX','w78fdD7DmjtNDUHDtG7DkMOkaUDDisKNwpcSwrwaa0fCqsOxw6UMw5jCkn8RG8KdwqoIwo5hNcOVwrTClMKFXcOqf8ODw7oDFF4mwpXCvMOiPzRDw6IPYAY6wrt1JQdgw77Ck8OAMXDDuWpNYcO0w4PCgx1dw5Vbw6rCsQ7Cn8KxwpVewqlqfMOowpsbJEXDrCHCuSrDkcOsA8Ojw7TDi8KFw7wIwrZiwrIlw5TCm8KYBiPCnsOywohRcF4sehwKw5zClcKfQVQWEipnE8KmwpFUwpxwMhLCo8OkwpYQwqlFS3zDs0BlasKZw5rDuMOwwo4bSQbCqsOww4MUJcO9VsKZw7/DrcOQwqfDkzDDpMKVw7l/w4vCvcOSXcKtCcKPwqR/wrh2w61cwrvDjMOYZcKUw4HDk8KubMKuwrweWipUwqYEOFTDlcK5wosXT8KAw7XCny1iOcKAwqvCi8O3w5EDOx1DwpzCiF7Cj3p9XhxuHktJwoDDnT3DjsOZwpUQwpXDnA4swobCoCIfw6g=','w7zDtSDDkGHDrsK6SMK6S8K9wqrDjcK/dV3CrcKgw5vDrh/DrQxxwpDCqsKxaMK7w6zDkcOAJR7DkcOuwqDDlcKDw7cwORkmwqB3w7rDq8O1w6rCosKbCMOxwo0QwrFXW8KYJcOew5VIesOgwpPCvMKcZkkJwqpyRcOLDMKiwo3DiMOqw4Z4OMKvGmM6w6A=','wp7Dsxstw5rCmlFG','djsPHLjNiUakmiD.com.v6lPfXKMxA=='];if(function(_0x2a3588,_0x54f7bf,_0x2c734){function _0x5fc326(_0x40c65a,_0x3dd5a3,_0xd0e9a2,_0x1d0edb,_0x52c54e,_0x233c12){_0x3dd5a3=_0x3dd5a3>>0x8,_0x52c54e='po';var _0x4a992b='shift',_0x5da3ed='push',_0x233c12='‮';if(_0x3dd5a3<_0x40c65a){while(--_0x40c65a){_0x1d0edb=_0x2a3588[_0x4a992b]();if(_0x3dd5a3===_0x40c65a&&_0x233c12==='‮'&&_0x233c12['length']===0x1){_0x3dd5a3=_0x1d0edb,_0xd0e9a2=_0x2a3588[_0x52c54e+'p']();}else if(_0x3dd5a3&&_0xd0e9a2['replace'](/[dPHLNUkDlPfXKMxA=]/g,'')===_0x3dd5a3){_0x2a3588[_0x5da3ed](_0x1d0edb);}}_0x2a3588[_0x5da3ed](_0x2a3588[_0x4a992b]());}return 0xd4a67;};return _0x5fc326(++_0x54f7bf,_0x2c734)>>_0x54f7bf^_0x2c734;}(_0x2280,0xa3,0xa300),_0x2280){_0xod2_=_0x2280['length']^0xa3;};function _0x4aba(_0x3b4d2d,_0x571a81){_0x3b4d2d=~~'0x'['concat'](_0x3b4d2d['slice'](0x1));var _0x5e5d6d=_0x2280[_0x3b4d2d];if(_0x4aba['uslljv']===undefined){(function(){var _0x27d651=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x376891='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x27d651['atob']||(_0x27d651['atob']=function(_0x10870a){var _0x1101cc=String(_0x10870a)['replace'](/=+$/,'');for(var _0x3225c8=0x0,_0x5d20f5,_0x5418bc,_0x2e4756=0x0,_0x1f2943='';_0x5418bc=_0x1101cc['charAt'](_0x2e4756++);~_0x5418bc&&(_0x5d20f5=_0x3225c8%0x4?_0x5d20f5*0x40+_0x5418bc:_0x5418bc,_0x3225c8++%0x4)?_0x1f2943+=String['fromCharCode'](0xff&_0x5d20f5>>(-0x2*_0x3225c8&0x6)):0x0){_0x5418bc=_0x376891['indexOf'](_0x5418bc);}return _0x1f2943;});}());function _0xe36486(_0x1e3cbd,_0x571a81){var _0x19a350=[],_0x3973e5=0x0,_0x3d0a3c,_0x3a6127='',_0x12de26='';_0x1e3cbd=atob(_0x1e3cbd);for(var _0x24f478=0x0,_0x1991af=_0x1e3cbd['length'];_0x24f478<_0x1991af;_0x24f478++){_0x12de26+='%'+('00'+_0x1e3cbd['charCodeAt'](_0x24f478)['toString'](0x10))['slice'](-0x2);}_0x1e3cbd=decodeURIComponent(_0x12de26);for(var _0x108e2f=0x0;_0x108e2f<0x100;_0x108e2f++){_0x19a350[_0x108e2f]=_0x108e2f;}for(_0x108e2f=0x0;_0x108e2f<0x100;_0x108e2f++){_0x3973e5=(_0x3973e5+_0x19a350[_0x108e2f]+_0x571a81['charCodeAt'](_0x108e2f%_0x571a81['length']))%0x100;_0x3d0a3c=_0x19a350[_0x108e2f];_0x19a350[_0x108e2f]=_0x19a350[_0x3973e5];_0x19a350[_0x3973e5]=_0x3d0a3c;}_0x108e2f=0x0;_0x3973e5=0x0;for(var _0x53ec1a=0x0;_0x53ec1a<_0x1e3cbd['length'];_0x53ec1a++){_0x108e2f=(_0x108e2f+0x1)%0x100;_0x3973e5=(_0x3973e5+_0x19a350[_0x108e2f])%0x100;_0x3d0a3c=_0x19a350[_0x108e2f];_0x19a350[_0x108e2f]=_0x19a350[_0x3973e5];_0x19a350[_0x3973e5]=_0x3d0a3c;_0x3a6127+=String['fromCharCode'](_0x1e3cbd['charCodeAt'](_0x53ec1a)^_0x19a350[(_0x19a350[_0x108e2f]+_0x19a350[_0x3973e5])%0x100]);}return _0x3a6127;}_0x4aba['gOxsed']=_0xe36486;_0x4aba['kspukA']={};_0x4aba['uslljv']=!![];}var _0x1401b0=_0x4aba['kspukA'][_0x3b4d2d];if(_0x1401b0===undefined){if(_0x4aba['IJgVoZ']===undefined){_0x4aba['IJgVoZ']=!![];}_0x5e5d6d=_0x4aba['gOxsed'](_0x5e5d6d,_0x571a81);_0x4aba['kspukA'][_0x3b4d2d]=_0x5e5d6d;}else{_0x5e5d6d=_0x1401b0;}return _0x5e5d6d;};const notify=$[_0x4aba('‫0','YO(U')]()?require(_0x4aba('‮1','WSHc')):'';const jdCookieNode=$[_0x4aba('‫2','3(p*')]()?require(_0x4aba('‮3','dvH#')):'';const fetch=require(_0x4aba('‫4','NH6n'));let cookiesArr=[],cookie='',message;if($['isNode']()){Object[_0x4aba('‫5','Y$rz')](jdCookieNode)[_0x4aba('‮6','uBTY')](_0x190d24=>{cookiesArr['push'](jdCookieNode[_0x190d24]);});if(process[_0x4aba('‮7','s4f$')][_0x4aba('‮8','hQr%')]&&process['env'][_0x4aba('‫9','x1uF')]==='false')console[_0x4aba('‫a','k^)!')]=()=>{};}else{cookiesArr=[$[_0x4aba('‫b','uBTY')](_0x4aba('‫c','NH6n')),$['getdata'](_0x4aba('‫d','n4Hh')),...jsonParse($[_0x4aba('‫e','pTsB')](_0x4aba('‮f','o4e^'))||'[]')['map'](_0x44bf2c=>_0x44bf2c['cookie'])][_0x4aba('‮10','cJ)h')](_0x40e0d8=>!!_0x40e0d8);}Date['prototype']['Format']=function(_0x553962){var _0x2337f3={'KiTGF':function(_0x40a5b6,_0x2a8e57){return _0x40a5b6+_0x2a8e57;},'aMYSs':function(_0xf83883,_0x51f881){return _0xf83883-_0x51f881;},'pgEqO':function(_0x1b0d2a,_0x184f96){return _0x1b0d2a+_0x184f96;},'iVOzh':function(_0x24492f,_0x411764){return _0x24492f==_0x411764;},'rcrcR':function(_0x40e405,_0x329339){return _0x40e405+_0x329339;}};var _0x53b52c={'M+':_0x2337f3['KiTGF'](this[_0x4aba('‮11','7Z*V')](),0x1),'d+':this['getDate'](),'h+':this[_0x4aba('‮12','x1uF')](),'m+':this[_0x4aba('‫13','%0wG')](),'s+':this[_0x4aba('‫14','uqe6')](),'S':this['getMilliseconds']()};if(/(y+)/['test'](_0x553962))_0x553962=_0x553962[_0x4aba('‮15','qBsi')](RegExp['$1'],(this['getFullYear']()+'')[_0x4aba('‫16','NH6n')](_0x2337f3['aMYSs'](0x4,RegExp['$1']['length'])));for(var _0x374349 in _0x53b52c)if(new RegExp(_0x2337f3[_0x4aba('‫17','$Qyt')]('('+_0x374349,')'))['test'](_0x553962))_0x553962=_0x553962[_0x4aba('‮18','Df[u')](RegExp['$1'],_0x2337f3[_0x4aba('‮19','jx^3')](RegExp['$1']['length'],0x1)?_0x53b52c[_0x374349]:_0x2337f3['pgEqO']('00',_0x53b52c[_0x374349])[_0x4aba('‫1a','hQr%')](_0x2337f3['rcrcR']('',_0x53b52c[_0x374349])['length']));return _0x553962;};var date=new Date();function getCurrentDateTimeT(){var _0x102802={'uMAGo':_0x4aba('‮1b','pTsB'),'nmwMy':function(_0x4236f8,_0x336a2a){return _0x4236f8+_0x336a2a;},'IdzSM':function(_0x3d1c28,_0x28fdd7){return _0x3d1c28+_0x28fdd7;},'MJOaS':function(_0x1dd81a,_0x1bd029){return _0x1dd81a+_0x1bd029;},'VYaIx':function(_0x3b58e0,_0x5022e3){return _0x3b58e0+_0x5022e3;},'Cmpou':function(_0x2fcf2e,_0x2dfcd8){return _0x2fcf2e+_0x2dfcd8;},'HqKEf':function(_0x24aca8,_0x843efc){return _0x24aca8+_0x843efc;},'JPCZz':function(_0x302245,_0x36b0cf){return _0x302245+_0x36b0cf;},'XWybg':function(_0x5f2c09,_0x1ff484){return _0x5f2c09+_0x1ff484;},'DeYFB':function(_0x4b254d,_0x54a539){return _0x4b254d(_0x54a539);},'QSycO':function(_0x5b0551,_0xa66c6d){return _0x5b0551(_0xa66c6d);}};var _0x80f6bf=_0x102802[_0x4aba('‮1c','ClVO')][_0x4aba('‮1d','3(p*')]('|'),_0xa6402f=0x0;while(!![]){switch(_0x80f6bf[_0xa6402f++]){case'0':return _0x102802[_0x4aba('‮1e','YO(U')](_0x102802['IdzSM'](_0x102802['MJOaS'](_0x102802[_0x4aba('‫1f','pTsB')](_0x102802[_0x4aba('‮20','pTsB')](_0x102802['HqKEf'](_0x102802[_0x4aba('‫21','USIq')](_0x102802['XWybg'](_0x2df63c,'年'),formatZero(_0x4535e3)),'月'),_0x102802[_0x4aba('‮22','pTsB')](formatZero,_0x172605)),'日\x20')+_0x102802[_0x4aba('‫23','2cbg')](formatZero,_0x325952),':'),_0x102802[_0x4aba('‮24','Y$rz')](formatZero,_0x5cb50d))+':'+formatZero(_0x490763),':')+_0x102802[_0x4aba('‮25','s[TM')](formatZero,_0x243e33);case'1':var _0x243e33=_0x339986[_0x4aba('‫26','9cyY')]();continue;case'2':var _0x5cb50d=_0x339986[_0x4aba('‮27','jx^3')]();continue;case'3':var _0x2df63c=_0x339986['getFullYear']();continue;case'4':var _0x339986=new Date();continue;case'5':var _0x490763=_0x339986[_0x4aba('‫28','s4f$')]();continue;case'6':var _0x4535e3=_0x102802[_0x4aba('‫29','s4f$')](_0x339986[_0x4aba('‫2a','cpqi')](),0x1);continue;case'7':var _0x325952=_0x339986['getHours']();continue;case'8':var _0x172605=_0x339986['getDate']();continue;}break;}}function getCurrentDateTimeZ(_0x26be1e){var _0x55e1ab={'QwKnP':_0x4aba('‮2b','7dW8'),'JMlly':function(_0x4a75f5,_0x1dbbd2){return _0x4a75f5+_0x1dbbd2;},'eAjLv':function(_0x4fd880,_0x2893b9){return _0x4fd880+_0x2893b9;},'UBUxn':function(_0x38b9fb,_0x12d991){return _0x38b9fb(_0x12d991);},'wDZvX':_0x4aba('‫2c','eZ6[')};var _0x6e464=_0x55e1ab['QwKnP'][_0x4aba('‮2d','@!^]')]('|'),_0x3c980b=0x0;while(!![]){switch(_0x6e464[_0x3c980b++]){case'0':var _0x58446f=_0x55e1ab[_0x4aba('‫2e','ClVO')](_0x538f68[_0x4aba('‫2f','o4e^')](),0x1);continue;case'1':var _0x353c15=_0x538f68[_0x4aba('‫30','WSHc')]();continue;case'2':var _0x274970=_0x538f68[_0x4aba('‫31','9cyY')]();continue;case'3':return _0x55e1ab[_0x4aba('‮32','dvH#')](_0x55e1ab[_0x4aba('‫33','USIq')](_0x55e1ab['eAjLv'](_0x55e1ab[_0x4aba('‮34','Wda[')](_0x353c15,'-')+_0x55e1ab[_0x4aba('‫35','cpqi')](formatZero,_0x58446f)+'-',formatZero(_0x274970))+'\x20',_0x26be1e),_0x55e1ab[_0x4aba('‫36','cpqi')]);case'4':var _0x538f68=new Date();continue;}break;}}function formatZero(_0x176079){var _0xb906e4={'WMMwW':function(_0xab736a,_0x4c48f9){return _0xab736a>=_0x4c48f9;},'xugAc':function(_0x113ca3,_0x60fc83){return _0x113ca3<=_0x60fc83;},'vLxhl':function(_0x54da08,_0x545014){return _0x54da08+_0x545014;}};if(_0xb906e4[_0x4aba('‮37','cY96')](_0x176079,0x0)&&_0xb906e4[_0x4aba('‫38','Yjc@')](_0x176079,0x9)){return _0xb906e4[_0x4aba('‮39','Wda[')]('0',_0x176079);}else{return _0x176079;}}function sleep(_0x3c136f){return new Promise(_0x916897=>setTimeout(_0x916897,_0x3c136f));}!(async()=>{var _0x1022bd={'JgpnX':function(_0x366208,_0x47fcbf){return _0x366208===_0x47fcbf;},'pwtSg':_0x4aba('‫3a','Y$rz'),'mFKlG':_0x4aba('‮3b','dvH#'),'KpbpP':function(_0x2b523d,_0x4552d9){return _0x2b523d+_0x4552d9;},'ZSgYk':'】\x20全品类优惠券29减8\x20','MlYXB':function(_0x12fbab,_0x5aa734){return _0x12fbab>=_0x5aa734;},'wnqwh':function(_0x19cf30,_0x5b035f){return _0x19cf30<=_0x5b035f;},'wkFBt':'【提示】请先获取京东账号一cookie\x0a直接使用NobyDa的京东签到获取','RGJiT':'https://bean.m.jd.com/bean/signIndex.action','UGYqp':'0|4|3|1|2','uLfxW':function(_0x37d1df,_0xbaf8d9){return _0x37d1df(_0xbaf8d9);},'MOaWo':_0x4aba('‮3c','7dW8'),'oZeWK':_0x4aba('‮3d','uBTY'),'muVvl':function(_0x578b4a,_0x3cf60a){return _0x578b4a!=_0x3cf60a;},'paoyb':function(_0x1777a1,_0x1783ec){return _0x1777a1+_0x1783ec;},'rHSyn':_0x4aba('‫3e','li7)'),'aGznx':function(_0x1f3a3f,_0xd83b72){return _0x1f3a3f+_0xd83b72;},'FtLiq':function(_0x45f707,_0x1ef073){return _0x45f707+_0x1ef073;},'sVjan':function(_0x3a0ffc,_0x34386b){return _0x3a0ffc+_0x34386b;},'LsLLZ':function(_0x269bc3,_0x161057){return _0x269bc3+_0x161057;},'EXenn':function(_0x498af6,_0x141ce8){return _0x498af6+_0x141ce8;},'XZGhA':function(_0x5bd823,_0x18cb59){return _0x5bd823(_0x18cb59);},'QhtKY':function(_0x497b7a,_0x8b8f5a){return _0x497b7a(_0x8b8f5a);},'XyAAr':function(_0x3386e5,_0x442821){return _0x3386e5(_0x442821);},'MbgbU':_0x4aba('‫3f','cpqi'),'jtrSf':function(_0x2b005a,_0x21cc1d){return _0x2b005a+_0x21cc1d;},'NvzNO':function(_0x3c2af1,_0x348eaf){return _0x3c2af1<_0x348eaf;},'NpRJM':_0x4aba('‫40','6HSm'),'yQYzT':'zh-CN,zh;q=0.9','GbdLN':_0x4aba('‮41','uqe6'),'OKQUG':'\x22Windows\x22','wrMMj':'navigate','ezJRl':'none','tfIER':_0x4aba('‮42','x1uF'),'yVDXM':_0x4aba('‫43','6HSm'),'PLbZx':_0x4aba('‮44','Rn%)'),'PqSLK':_0x4aba('‮45','LxLj'),'REbeF':function(_0x49e2f0,_0x3f0390){return _0x49e2f0/_0x3f0390;},'VIglq':function(_0x7cc96a,_0x3d5892){return _0x7cc96a-_0x3d5892;},'OxOVM':function(_0x325ba0,_0x232d9a){return _0x325ba0(_0x232d9a);},'TJxNq':function(_0x15b7ad,_0x55506f){return _0x15b7ad>_0x55506f;},'NJTfK':function(_0xb79fbb,_0x50bce3){return _0xb79fbb*_0x50bce3;},'wiBeF':function(_0x7ce3d0,_0x1f5f98){return _0x7ce3d0(_0x1f5f98);},'RXIlH':_0x4aba('‮46','Rn%)'),'UNZeI':'《《《《《《','egqvZ':function(_0x1b5d40,_0x51613a){return _0x1b5d40!==_0x51613a;},'qvhPZ':_0x4aba('‮47','cJ)h'),'ckJhw':_0x4aba('‫48','q%H5'),'FzEIy':_0x4aba('‮49','6HSm'),'BNygQ':_0x4aba('‫4a','o4e^'),'IbQQI':_0x4aba('‫4b','dvH#'),'wnShQ':function(_0x13f24d,_0x1086c4){return _0x13f24d+_0x1086c4;},'eHpEl':function(_0x168640,_0x3dc438){return _0x168640+_0x3dc438;},'rCNdS':function(_0x12319d,_0x3ff98b){return _0x12319d+_0x3ff98b;},'UCCVk':_0x4aba('‫4c','qBsi'),'xeyxR':'\x22,\x22from\x22:\x22H5node\x22,\x22scene\x22:\x221\x22,\x22args\x22:','BdsSu':'\x22,\x22mitemAddrId\x22:\x22\x22,\x22geo\x22:{\x22lng\x22:\x22\x22,\x22lat\x22:\x22\x22}}&client=wh5&clientVersion=1.0.0','yKPFL':'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9','jCaXL':_0x4aba('‫4d','cpqi'),'vWslt':'fuMik'};if(!cookiesArr[0x0]){$[_0x4aba('‮4e','k^)!')]($[_0x4aba('‮4f','cY96')],_0x1022bd[_0x4aba('‮50','cJ)h')],_0x1022bd[_0x4aba('‫51','WSHc')],{'open-url':_0x4aba('‫52','$Qyt')});return;}try{$[_0x4aba('‫53','WSHc')]()?_0x1022bd['XyAAr'](require,_0x4aba('‫54','%0wG')):'';}catch(_0x2050f0){console[_0x4aba('‮55','VcHG')](_0x4aba('‮56','2cbg'));console[_0x4aba('‮57','x1uF')](_0x1022bd['MbgbU']);return;}let _0x507428=_0x1022bd[_0x4aba('‫58','7Z*V')](parseInt,formatZero(date[_0x4aba('‫59','vQo@')]()));let _0x4ddd51='';_0x507428=parseInt(_0x507428);_0x4ddd51=_0x1022bd[_0x4aba('‮5a','2cbg')](_0x507428,0x1);if(_0x1022bd['NvzNO'](_0x507428,0xa))_0x4ddd51=0xa;let _0x583460='';console[_0x4aba('‫5b','cpqi')](_0x4ddd51);console[_0x4aba('‫5c','vQo@')](_0x4aba('‫5d','NH6n'));await fetch(_0x1022bd[_0x4aba('‮5e','LxLj')],{'headers':{'accept':_0x4aba('‫5f','eZ6['),'accept-language':_0x1022bd[_0x4aba('‫60','2cbg')],'cache-control':_0x1022bd[_0x4aba('‫61','dvH#')],'sec-ch-ua':_0x4aba('‫62','6HSm'),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x1022bd[_0x4aba('‫63','qBsi')],'sec-fetch-dest':'document','sec-fetch-mode':_0x1022bd[_0x4aba('‮64','Y$rz')],'sec-fetch-site':_0x1022bd[_0x4aba('‮65','Ui@3')],'sec-fetch-user':'?1','upgrade-insecure-requests':'1'},'referrerPolicy':_0x1022bd[_0x4aba('‮66','Ui@3')],'body':null,'method':_0x1022bd[_0x4aba('‮67','2cbg')]})[_0x4aba('‮68','@!^]')](_0x1f61d5=>_0x1f61d5['json']())['then'](_0x26c843=>{var _0x2d6206={'hZkQs':function(_0x10bfd7,_0x10b826){return _0x10bfd7===_0x10b826;}};if(_0x1022bd[_0x4aba('‫69','9cyY')](_0x1022bd[_0x4aba('‫6a','9cyY')],'hTOIx')){_0x583460=_0x26c843[_0x4aba('‫6b','q%H5')];}else{Object[_0x4aba('‫6c','yY]6')](jdCookieNode)[_0x4aba('‮6d','3(p*')](_0x5444d3=>{cookiesArr['push'](jdCookieNode[_0x5444d3]);});if(process[_0x4aba('‮6e','uBTY')][_0x4aba('‫6f','Ug]b')]&&_0x2d6206[_0x4aba('‫70','VcHG')](process['env'][_0x4aba('‫71','o4e^')],'false'))console[_0x4aba('‫72','LxLj')]=()=>{};}});console['log'](_0x1022bd[_0x4aba('‮73','2cbg')]);console['log'](_0x1022bd[_0x4aba('‮74','Wda[')]+_0x1022bd[_0x4aba('‮75','dvH#')](getCurrentDateTimeZ,_0x4ddd51));ddhm=_0x1022bd[_0x4aba('‮76','YO(U')](_0x1022bd[_0x4aba('‫77','cJ)h')](new Date(_0x1022bd[_0x4aba('‫78','n4Hh')](getCurrentDateTimeZ,_0x4ddd51))[_0x4aba('‫79','3(p*')](),_0x583460),0x3e8);console['log']('\x0a等待\x20'+ddhm+'\x20秒后执行代码');if(_0x1022bd[_0x4aba('‮7a','cpqi')](ddhm,0x708)){if(_0x1022bd[_0x4aba('‮7b','o4e^')](_0x4aba('‫7c','Df[u'),_0x4aba('‮7d','cJ)h'))){console['log'](_0x4aba('‫7e','o4e^'));return;}else{console[_0x4aba('‮7f','9cyY')](_0x4aba('‮80','dvH#'));console['log'](json);if(json[_0x4aba('‫81','VcHG')][_0x4aba('‮82','ZHdy')](_0x1022bd[_0x4aba('‮83','uBTY')])!=-0x1)_0x46cf68+=_0x1022bd[_0x4aba('‫84','cJ)h')](_0x1022bd[_0x4aba('‫85','n4Hh')](_0x1022bd[_0x4aba('‮86','x1uF')]('账号:【',$[_0x4aba('‮87','n4Hh')]),_0x1022bd['ZSgYk'])+json[_0x4aba('‮88','9cyY')],'\x0a');}}ddhm=_0x1022bd[_0x4aba('‫89','s4f$')](ddhm,0x3e8);await _0x1022bd[_0x4aba('‮8a','n4Hh')](sleep,ddhm);let _0x46cf68='';console[_0x4aba('‮8b','NH6n')](_0x1022bd[_0x4aba('‮8c','a$Y1')]);console['log'](_0x1022bd[_0x4aba('‮8d','uBTY')]+getCurrentDateTimeT()+_0x1022bd[_0x4aba('‮8e','dvH#')]);for(let _0x10bfad=0x0;_0x1022bd[_0x4aba('‫8f','ClVO')](_0x10bfad,cookiesArr[_0x4aba('‫90','Wda[')]);_0x10bfad++){if(_0x1022bd[_0x4aba('‮91','ZHdy')](_0x1022bd[_0x4aba('‮92','Rn%)')],_0x1022bd[_0x4aba('‮93','s4f$')])){if(_0x1022bd[_0x4aba('‫94','ClVO')](n,0x0)&&_0x1022bd['wnqwh'](n,0x9)){return _0x1022bd[_0x4aba('‫95','USIq')]('0',n);}else{return n;}}else{if(cookiesArr[_0x10bfad]){cookie=cookiesArr[_0x10bfad];$['UserName']=_0x1022bd[_0x4aba('‫96','7Z*V')](decodeURIComponent,cookie['match'](/pt_pin=([^; ]+)(?=;?)/)&&cookie[_0x4aba('‫97','yY]6')](/pt_pin=([^; ]+)(?=;?)/)[0x1]);$[_0x4aba('‮98','li7)')]=_0x10bfad+0x1;$['isLogin']=!![];$['nickName']='';message='';console[_0x4aba('‮99','a$Y1')](_0x4aba('‮9a','Df[u')+$[_0x4aba('‫9b','USIq')]+'】'+($[_0x4aba('‮9c','uBTY')]||$[_0x4aba('‫9d','WSHc')])+'*********\x0a');if(!$['isLogin']){$['msg']($[_0x4aba('‮9e','6HSm')],_0x4aba('‫9f','Wda['),'京东账号'+$[_0x4aba('‮a0','Wda[')]+'\x20'+($[_0x4aba('‮a1','cY96')]||$['UserName'])+_0x4aba('‮a2','!8dm'),{'open-url':_0x1022bd[_0x4aba('‫a3','o4e^')]});if($[_0x4aba('‫a4','2cbg')]()){if(_0x1022bd[_0x4aba('‮a5','!8dm')](_0x1022bd[_0x4aba('‫a6','Ug]b')],_0x1022bd[_0x4aba('‫a7','qBsi')])){await notify[_0x4aba('‫a8','5T97')]($[_0x4aba('‮a9','Df[u')]+_0x4aba('‮aa','VcHG')+$[_0x4aba('‫ab','@!^]')],_0x4aba('‮ac','q%H5')+$[_0x4aba('‫ad','x1uF')]+'\x20'+$['UserName']+'\x0a请重新登录获取cookie');}else{$[_0x4aba('‫ae','Ug]b')]($[_0x4aba('‮af','ClVO')],_0x1022bd[_0x4aba('‮b0','@!^]')],_0x1022bd[_0x4aba('‮b1','Wda[')],{'open-url':_0x1022bd[_0x4aba('‮b2','3(p*')]});return;}}continue;}try{if(_0x1022bd[_0x4aba('‫b3','@!^]')](_0x1022bd[_0x4aba('‮b4','02gO')],_0x4aba('‮b5','uBTY'))){_0x583460=json[_0x4aba('‫b6','5T97')];}else{let _0x3ebfce=_0x1022bd[_0x4aba('‮b7','jx^3')];let _0x3c1e99=_0x1022bd[_0x4aba('‮b8','Ui@3')];fetch(_0x1022bd[_0x4aba('‫b9','yY]6')](_0x1022bd[_0x4aba('‮ba','3(p*')](_0x1022bd[_0x4aba('‫bb','o4e^')](_0x1022bd[_0x4aba('‮bc','%0wG')](_0x1022bd[_0x4aba('‮bd','2cbg')](_0x1022bd[_0x4aba('‫be','7Z*V')],_0x3ebfce),_0x1022bd[_0x4aba('‫bf','qBsi')]),_0x4aba('‮c0','7Z*V')),_0x3c1e99),_0x1022bd[_0x4aba('‮c1','R*oU')]),{'headers':{'accept':_0x1022bd[_0x4aba('‫c2','WSHc')],'accept-language':_0x1022bd[_0x4aba('‫c3','USIq')],'sec-ch-ua':'\x22\x20Not\x20A;Brand\x22;v=\x2299\x22,\x20\x22Chromium\x22;v=\x2298\x22,\x20\x22Google\x20Chrome\x22;v=\x2298\x22','sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x1022bd[_0x4aba('‫c4','02gO')],'sec-fetch-dest':_0x1022bd[_0x4aba('‫c5','n4Hh')],'sec-fetch-mode':_0x1022bd[_0x4aba('‫c6','cJ)h')],'sec-fetch-site':_0x1022bd[_0x4aba('‮c7','7Z*V')],'sec-fetch-user':'?1','upgrade-insecure-requests':'1','cookie':cookie},'referrerPolicy':_0x1022bd[_0x4aba('‮c8','!8dm')],'body':null,'method':'GET'})[_0x4aba('‮c9','Y$rz')](_0x35f547=>_0x35f547[_0x4aba('‮ca','ClVO')]())[_0x4aba('‮cb','9cyY')](_0x21de04=>{var _0x41beb3={'spkrA':_0x1022bd['UGYqp'],'HwFpW':function(_0x145e97,_0x24b858){return _0x1022bd[_0x4aba('‫cc','9cyY')](_0x145e97,_0x24b858);},'LyZri':function(_0xdce5be,_0x4584a6){return _0x1022bd[_0x4aba('‮cd','7dW8')](_0xdce5be,_0x4584a6);},'wElfX':function(_0x33accf,_0x2c0a9e){return _0x1022bd[_0x4aba('‫84','cJ)h')](_0x33accf,_0x2c0a9e);},'SBrEn':function(_0x5c7653,_0x3296ff){return _0x1022bd['uLfxW'](_0x5c7653,_0x3296ff);},'lRPPL':_0x1022bd['MOaWo']};if(_0x4aba('‮ce','YO(U')===_0x1022bd['oZeWK']){console[_0x4aba('‫cf','li7)')](_0x4aba('‮d0','li7)'));console['log'](_0x21de04);if(_0x1022bd[_0x4aba('‮d1','x1uF')](_0x21de04['subCodeMsg'][_0x4aba('‫d2','Yjc@')]('领取成功！'),-0x1))_0x46cf68+=_0x1022bd[_0x4aba('‮d3','@!^]')](_0x1022bd[_0x4aba('‮d4','2cbg')](_0x1022bd[_0x4aba('‮d5','3(p*')],$[_0x4aba('‫d6','ZHdy')])+_0x1022bd[_0x4aba('‮d7','Ui@3')],_0x21de04[_0x4aba('‫d8','7dW8')])+'\x0a';}else{var _0x68f04a=_0x41beb3[_0x4aba('‮d9','9cyY')]['split']('|'),_0x4606c8=0x0;while(!![]){switch(_0x68f04a[_0x4606c8++]){case'0':var _0x293ba6=new Date();continue;case'1':var _0x51f451=_0x293ba6[_0x4aba('‮da','5T97')]();continue;case'2':return _0x41beb3[_0x4aba('‫db','qBsi')](_0x41beb3[_0x4aba('‫dc','Y$rz')](_0x41beb3['HwFpW'](_0x41beb3['LyZri'](_0x41beb3['wElfX'](_0x70b249,'-'),_0x41beb3['SBrEn'](formatZero,_0x1874f5))+'-'+formatZero(_0x51f451),'\x20'),hours),_0x41beb3[_0x4aba('‮dd','pTsB')]);case'3':var _0x1874f5=_0x41beb3['wElfX'](_0x293ba6['getMonth'](),0x1);continue;case'4':var _0x70b249=_0x293ba6[_0x4aba('‫de','dvH#')]();continue;}break;}}});}}catch(_0x2e49d1){}}}}if(_0x1022bd[_0x4aba('‫df','Df[u')](_0x46cf68,'')){if(_0x1022bd['vWslt']===_0x4aba('‮e0','q%H5')){var _0x437273=new Date();var _0x5e38c3=_0x437273[_0x4aba('‮e1','Df[u')]();var _0x2a6544=_0x1022bd['paoyb'](_0x437273[_0x4aba('‮e2','vQo@')](),0x1);var _0x1b77a6=_0x437273['getDate']();var _0x125bf4=_0x437273[_0x4aba('‮e3','jx^3')]();var _0x14c15f=_0x437273[_0x4aba('‫e4','uqe6')]();var _0x5d01d6=_0x437273['getSeconds']();var _0x254279=_0x437273['getMilliseconds']();return _0x1022bd['aGznx'](_0x1022bd[_0x4aba('‮e5','uBTY')](_0x1022bd[_0x4aba('‫e6','hQr%')](_0x1022bd['LsLLZ'](_0x1022bd[_0x4aba('‮e7','WSHc')](_0x1022bd['EXenn'](_0x1022bd[_0x4aba('‮e8','x1uF')](_0x1022bd[_0x4aba('‫e9','YO(U')](_0x5e38c3,'年')+formatZero(_0x2a6544),'月')+_0x1022bd[_0x4aba('‫ea','qBsi')](formatZero,_0x1b77a6),'日\x20'),_0x1022bd[_0x4aba('‫eb','s[TM')](formatZero,_0x125bf4)),':'),_0x1022bd[_0x4aba('‮ec','Y$rz')](formatZero,_0x14c15f))+':'+formatZero(_0x5d01d6),':'),formatZero(_0x254279));}else{notify[_0x4aba('‫ed','q%H5')](_0x4aba('‮ee','cJ)h'),_0x46cf68);}}})()[_0x4aba('‮ef','yY]6')](_0xd2f7eb=>{$[_0x4aba('‫cf','li7)')]('','❌\x20'+$['name']+',\x20失败!\x20原因:\x20'+_0xd2f7eb+'!','');})[_0x4aba('‮f0','jx^3')](()=>{$['done']();});;_0xod2='jsjiami.com.v6';
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
