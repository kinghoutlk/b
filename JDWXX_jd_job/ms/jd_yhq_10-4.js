/*
全品类优惠券10减4
自动预约茅台 执行时间大家自己改下
脚本兼容: QuantumultX, Surge,Loon, JSBox, Node.js
=================================Quantumultx=========================
[task_local]
#全品类优惠券10减4
0 55 * * * * https://github.com/JDWXX/jd_job/blob/master/ms/jd_jdjsb_10_4.js, tag=全品类优惠券10减4, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/jd.png, enabled=true
=================================Loon===================================
[Script]
cron "0 55 * * * *" script-path=https://github.com/JDWXX/jd_job/blob/master/ms/jd_jdjsb_10_4.js,tag=全品类优惠券10减4
===================================Surge================================
全品类优惠券10减4 = type=cron,cronexp="0 55 * * * *",wake-system=1,timeout=3600,script-path=https://github.com/JDWXX/jd_job/blob/master/ms/jd_jdjsb_10_4.js
====================================小火箭=============================
全品类优惠券10减4 = type=cron,script-path=https://github.com/JDWXX/jd_job/blob/master/ms/jd_jdjsb_10_4.js, cronexpr="0 55 * * * *", timeout=3600, enable=true
 */
const $ = new Env('全品类优惠券10减4');
console.log("\n活动地址 https://u.jd.com/BCJekXm\n")
var _0xodM='jsjiami.com.v6',_0xodM_=['‮_0xodM'],_0x3bd6=[_0xodM,'wpvDvQg=','w50WwrvChsKO','fcOsa0wa','w7/DpERbw4U=','S8KlJGHDrA==','w5h1wqI=','AeesreW/k8Kx','QMOwOFLDvQ==','CcKNwpptwqg=','w73DhcOH','56+95b6f5pSz6Ze75aac5Lmoc2AYaMOow5DnpqPvvr/ljpvls5PmlpzvvJrvvpXnuo3mrJnovr/ooJDCig==','w7rDvHB7w7c=','wqkzJ2LCjw==','Bx3CqQ==','wo7DpCfChcKm','wqANDFnCgg==','w5jDr8Obwpka','w57Dj8OCwpcow7A=','eMOrTHMzOcKcwq8=','wqIaH2PCgA==','w4rCpcO+HsO0','w5IVJTDDkg==','w68KDBjDrQ==','e8OYSMK8wr5iw70=','wpnDuwzClcKkbsOwdw==','w43CuUp1wqU=','OsKNwpBKwqnDl1TCvg==','NMK2C8K9dsKHKGXCqsK3','AgHCgioHwrrDrQ==','wpLDmjQ=','44Ky5o+O56aR44O/w63DjcOdTsOZUOW1m+Wnk+aXjw==','5Li95Lq26LaG5Y6l','WMKEf8O+McOhM8Kn','w4LCisKCFErDncOtw6Q=','w7TDki7DmsKww4cww7BQfQ==','w4ZleEc=','G8KtwqvCpsO0w6/ltqjlpqzmlLnCocOFwqk=','5LmT5Lq16LW15Y+7','wqYVD2XCkA==','wqnDoMOYwrtKMGIt','w6ror4/pho/ml7XnmrTlvYXoj5nljYLDhsODG8O4OcKt','FcKqwqhOwqY=','U8OvH0nDsw==','w702BQzDiQ==','w4DDhBDDtsKY','TErDssKUU8KLw7nCujhww4VvPcOuIjRmw4cSw70FMgzDvMKzKMOVccO2KsKtSU8rU8Orw5F6YA3CklrChcOlTsKVCMOrSTdYw7nDsMKBw63Dp8KmO2PDmMKOwovCoMK4F1bDlMKyUj4cDcKMw49awqYUXsOdCSNZJ8KGwpF2FjTDgyRKZQDCnsOnDyXDmzAzI8OgBBd9XAUFa8OVCxfDsQBOw5hKwrVSLcKawocxw4/DvcOKwqnCtXLCmnTCtsOWwohkMsKiwrfDtcKfwpbCvFvCqcOyw4vDqcKRwogAasO/OQjDhMOqw4tvw4c7KFXDv8OTbS/DjMKVSzdsNcOAwr/DnAtFwqvCi0TCrsKfMVfCqj0Yw5x8w5nCp8OhYFpbwqRsQ8KocCkdPRJkTl5jTsOECMOowq3DriJOwqzCvMKdw7XDp8KtwpzDvMO5w7t1wqzDgwk6w5XCncKDLD1xw5HDvsODw6zCgMKIw4TDrsOTMcOULGjDoiFZw7/CshfCocKRw4vDj0VtdMObwrI=','w7RHw7/CqsOF','w6XDi8OkBhg=','wqXDpSTCs8KL','R8OVEF3DsQ==','w6vDucOZwpUv','IcK7wrBVwqY=','w6vCjEfCh8KoQhpXw4x6J8OfDMOCRSrDjjvDlMKQw68fasKhwpvCvMOlA8KHw4zCkVPCtwHDuw9FwogvDwHDr8KVUcKMw6A7w5HDmMORNMK1w5MPPEJYw4jDrcK2wo0uw7vCuXNwwrljLsKHGsOaQcKSw47Dug==','wplbDzrDnlQsw5HCtsKtwqfCvgNkwr1SZFTDicO9wpkbPcKJw7/CshDChsKkEnjCtCDClmzDnMOqM8Oww6LCjcOiw7rDuMKDwr41LwwHIsKNCsOKworCosKGw7NIC1Z3Hkc=','R8KMwrkSeA==','w4nCnUFnwrs=','w4HDnsOewpk/w6wVHG/CmcOSJMKbSwFdwpUwdsOzFsK9wp3CkijDt8KDw59RfjA=','w7w+FQ==','Eit+GQ==','wp3DmGs=','5YWj5ZKl57Ct5L6J5oGP5YikLB7lhIfCmQ==','IMKtwpc=','e8OFYMK2wqFEw7U=','wpzDkU7DhRA=','w5DDgFd2w7E=','wrjDoFXDiTs=','w4TDmcOFICfDq8OzRg==','wpvCiHjDjFE=','wo3Do2DDrRzCgWLDi8OuwrA=','PsO7w7bDv8Ofw4gfwq43wrPDmsK6e8OaGzrCizXDj8K4w6LClFbDgysVwp1Ew68owrbDtTTCpEbCrUbCpA==','wp7CgsK9SsOdwrguw5PCi8KUw7/CocONwp9mw5fCoMK/TcKJRE4LSsOWwoTDsMOOw6TDosKrDMO4A1YbDsOYU8KlKcK7NGjCiwLDqsOwwp4dOMOWG19+XsKbVsOZVcKqw6fCgsOYwrxkSkdPO0FKOQMDbl1pw5nDrMKzXcOsRVfCisOCwpjCn8Orw7LCk8KaJ8OQSyTCoMKmw5dKFcOrfkzCvMOJwp3ChWBww4YpYcKew4HCkicnFxkVwqMxe8K6PcKDRsKZXsO4w4ZGRTDCojZow6wDw47CtDbDvMKTw5VxO8Kgw7TCkk7CuRzDhcO1w6LDqsKTw5R6UMKrwrXDhG3CicK+CMOUYcKyO8OZwrfCvsOREsOSwp7DjAQhwrxWwptjw7UmwpHDlULCg8KbwpHDnBDDnMOrbQfDhMOGwqYDZE3CuMK1AwbCksKTw7xvQChWRcKoOF/DmMOTHD/Dg8KyBFpqwr3Dk3UyBsKKScOrc8O8Zi7DusOcw701w4jDrcKrwr9dw5RLwrPDqMKJJjzChzlPwq3DlA==','wo4eagpG','GRrChMKIw6I=','bcKDNE7DjA==','w55mwpQHFg==','Y8OwCXLDlw==','S8O4ccK2wqo=','wr/DlUfDhQs=','QAcew57DpA==','QcOQY3YU','w7NIw63CocOB','ZMOEP17DiQ==','IRNow5fCncOvwpDCmcKa','w7PCo8OjMsO4','LhvCgcK9w7M=','wrnDnhpYwo0=','RAFV','w4htw4TCgA==','QsKFecO7','wqXDjwI=','5Ye/5ZC457Kc5L2+5oOk5YqEwrHCseWFunQ=','wqDChFE=','GAfCrAYPwrfDpmrCjQ0=','w644w4ISRw==','w7tCwpJWw5k=','T2HDlTDDhw==','6LWT5Y+7w7/jgrM=','HD3CtMKpw4pBw6kYTcOE','w6RAwqhjw4k=','IXzChsOlYA==','eAE4w7XDoXNpR8Kuw5Q=','esK9IkvDhg==','w5fCskB0wpPDhMKuw7xefg==','w4bCqMOOGsOR','YCV1w5rCkQ==','w4rCtkN1','w5DCs+WmjOi3rCVx5Y6Q5ZqobWU=','Zytvw5w=','wpbDmh1jworCkw==','w67DhA7DkcKaw40=','w60xw6QEO1BrcMOrw6E=','DzBVGMKDKQ==','SVM5w6U=','w4HCuVg=','BsKGwq9vwrTDh8Kgcw==','KcKswoY=','woU/NETCrXHDjxI=','AyfCsQ==','H8KnwrDCqcO8w747','F8KLwpxKwo7Dk3PCnw==','O8KtwqvCpsO0w68Qw5lD','wq7DhRHCjsKgQh4=','wrTDvQDClcKDasOuWHo=','acK0w48=','w6HCq8O4EMO9w7U=','w64CwoLCj8KowpVa','M8KBwodpwojDg0vCqA==','wqvCjkLDs1/Ch8KHCTbCjw==','w5B7w5vCgsOvw4HDlw==','XkM+w4svw5ViS8KywrbCvw==','wos5Wht1wr4=','aMKww5FlwpcH','VsO8fcK+wr4=','OMKnwoNf','w5pRwrYJMBHDmw==','ZsKqwq4vYQ==','w6UCwpjCrMK9wok=','NjJQJ8KF','ZMKFwrkdecKi','WA7DujlYwq/CtFvDixbDnsKzw5QRw7wRNg==','wq0vaAVE','w5tEwqoMJQ==','bMKQJ3zDsg==','wo7DhyPCn8KG','QFMkw4MP','HzZ1OcKy','c8OOQ8KpwpI=','woFdBT/ChA==','wofDhjLCoMKD','UMKqWsOHPg==','dMOsQsKBwpg=','w49RwrIoOB7DksKbw7Ircg8idjc=','wpnDs3bDqAbCiWvDn8O4wrbCvw==','w4PCslpYwrLDnsKow6Y=','wpDDtmlbw7nDmQzDucOtw5w=','woddNgjCoH4aw7w=','wpguwpvDlMK+wpI=','wrwWNcKXJw==','FTN3HsKT','VjR4w5LCsA==','w5Mtw4QYew==','wpQGBsKbIg==','JATCqjMq','KsOfKVpv','wqvCjkLDpFvCkMKN','wpvDtsOJwoRrP3sg','esOLwoJNw5XChwvDrD3CmEfDusKERW3Dsg==','w57DqcOwFSg=','YsK5wqEPTg==','JEjCo8OvcA==','R8Kjwoc9TA==','DwRDA8K/','wqPDuRPCn8KC','w79TWFNe','fcKwCl/Drg==','P8Kowp9MwqE=','VsOmIlfDuA==','6aCO5YyL5omI5YiJ7721','w71Cc2fDqDYow5nCssOtw7TDo14Hw4Ida0fCscOzwogBLcOvwo/DqVPCqsO4SzzDqV3Dj3PCj8KvZQ==','w7c7w7gVOV56acOkwqUDQsOgwoQOBjpnSlEYXg1nwq3CgMOowpfCn8K8worDqTgzwqhIwoAywqlZw7XCjSbCgnrCoAEMwqnDnMOwHcKHw48vw4DCh8OWwp8cHcOqwq0iwojDnUTDqsKuw7I9B3/Cj8OFw4XChcKkdcOtw7nColEmPyFIwqbCt2/Cjg/CmFxCWsOCGVgtwrNJHsKlwrzDtErCu8O7wprCjcK/wppKfBc9worClQrCgHfCgXJQw73Cj8OAwrZHOsOFwojCoMO7','LsKMw55iwqnCmkPCsz/Dn0zDvMKSUg==','bsKVwplFwpXDqsKCR2U=','asK0w4lrwoQOPAU=','5Yaf5ZGT57CU5L+m5oCK5Yi3wqwi5YexKw==','44Cw5o+j56a444Gq6K2a5Yap6I6a5Yye5Luh5LmB6LS55YyC5LiVwo7DssO6N8KCZHDnmYDmjojkvKnnlYHCnSJYwr83POeZt+S4hOS7suetiOWJsOiOuuWMlA==','UVI+w70pwoMhPcK1wrLCrMOcwp/DgULDpcOZw7wHw5HCicKCN0vCn0tkDcKqcGZ0w6nDqDDCrTbDn8KpZwHDpzQ=','w5DCuXPDgkHDlDXCscKkw6HDu8Orw4gywpIw','wqjmi5fkubjlub3liK7Ds8Oj576B776qB8KYw5DCsE/CqXLCq8O444Kfw6fCgykYNDFewqZoHe+9vuecoOe/mOWHsuWTuTo=','bH4mSsOaccOKRMOxQ8KMQcOS44Ky5LmT5Lmc5pWm6Za15qOW5YWi44Ozwo0vw6ZnNQnCnsKpw4DDrCXDpMKIw5HCgw==','AwbCujUTw6nCrAjCnxrChsOhwo9DwqQJKA3CisOqwoXCsybCtzU7w5FQeVTDlcOgwqgALSZ7wohQRH7DkcO+K8Kywoxxwo/CrGtOaFgCw7/CoXIfw7kOWQ/CjAENwrN1dMOubsK5wr4lOAbDq1cw','w7zDi8OYfwjDrcO7HsOi','wqjChFXDlVfCgcKGEw==','w6PCkno=','Kg7Cv0bCkMOcEMO1cGAiw4gow5DCoMKoYcOWPEfCiRBrVMOucAfDu05gw47ClcOTC30ww7/ChsOnw5Ej','woPDpSDCjcKt','44Gs44GJ44CR44G944Ot44GG','wookW01FMHfDlcOgGi3DrsOsdMOSw6tBbSccMHR5wqoeB8OdUQ1JJXnDn0djwqzCosORw7dDw7I7w75WeFZywoAlW0HCscKnBcKiwrvCrMKcDMO+wpA9WAc=','w5lpwqI=','w4x/w4bCiw==','L8K2woPCiMOz','w77Cg09qwpg=','YcKTwpkVacKv','w7DCgMOCLMOm','w7bCmeaKrOikgOW+k+S8seayruaKgeaJhuS6luW4gO+8qOiHlOadneS6huaLsuihnuS5njPCqA==','bytm','w7DDhMO8wpoT','w79AXXNL','TMKVLn3DsQ==','M8KBworChMOa','w4kiJwzDmw==','wrDCg8OGMcKt','wqbDs2PDqSY=','w53CiR1jwprDjcOiw5NHAsOMwqQUeyLDvmc7BHg4w5lUfsK9A3/CvgvDj8O0NEdzF8KBfzzDu8KZw5bCqMOAAcKYw4jCgnUQwr8JGXfDh8KJS8KnUSJ7AH3Dp8K7','bg5uw47Cnw==','wq7DmiTCgMKs','fwwzw78=','w55pwqph','w5xscEw=','w4xaw4zCpMOY','wrnDscO+wrlF','LRvCucKvw64=','w4zCocOzDg==','YsK6w41HwoIMIA==','w41qYw==','WMOvW8KXwpxJw4bCrQ==','FzZ+w4PCrA==','MsOyGXdE','w6UIwpE=','w4Frw5nCnMOrw4zDhnHDmVjDjMOQ','Cix8','juuswBPtjiarWHJLReOFQmi.com.v6=='];if(function(_0x592bd5,_0x144f66,_0x3dc47f){function _0x5ba1a3(_0x1e9ffe,_0x4574b7,_0x183fd9,_0x2cb5b2,_0x449da1,_0x2a67b2){_0x4574b7=_0x4574b7>>0x8,_0x449da1='po';var _0xa5b995='shift',_0x27f9d6='push',_0x2a67b2='‮';if(_0x4574b7<_0x1e9ffe){while(--_0x1e9ffe){_0x2cb5b2=_0x592bd5[_0xa5b995]();if(_0x4574b7===_0x1e9ffe&&_0x2a67b2==='‮'&&_0x2a67b2['length']===0x1){_0x4574b7=_0x2cb5b2,_0x183fd9=_0x592bd5[_0x449da1+'p']();}else if(_0x4574b7&&_0x183fd9['replace'](/[uuwBPtrWHJLReOFQ=]/g,'')===_0x4574b7){_0x592bd5[_0x27f9d6](_0x2cb5b2);}}_0x592bd5[_0x27f9d6](_0x592bd5[_0xa5b995]());}return 0xd4a65;};return _0x5ba1a3(++_0x144f66,_0x3dc47f)>>_0x144f66^_0x3dc47f;}(_0x3bd6,0x152,0x15200),_0x3bd6){_0xodM_=_0x3bd6['length']^0x152;};function _0x545b(_0x1b7957,_0x34cd23){_0x1b7957=~~'0x'['concat'](_0x1b7957['slice'](0x1));var _0x1e5b39=_0x3bd6[_0x1b7957];if(_0x545b['AwNqSE']===undefined){(function(){var _0x1f0e0d=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x5bfa7b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x1f0e0d['atob']||(_0x1f0e0d['atob']=function(_0x1f3c5b){var _0x446029=String(_0x1f3c5b)['replace'](/=+$/,'');for(var _0x24110b=0x0,_0x355975,_0x316d7e,_0x1f8c8f=0x0,_0x3657ef='';_0x316d7e=_0x446029['charAt'](_0x1f8c8f++);~_0x316d7e&&(_0x355975=_0x24110b%0x4?_0x355975*0x40+_0x316d7e:_0x316d7e,_0x24110b++%0x4)?_0x3657ef+=String['fromCharCode'](0xff&_0x355975>>(-0x2*_0x24110b&0x6)):0x0){_0x316d7e=_0x5bfa7b['indexOf'](_0x316d7e);}return _0x3657ef;});}());function _0x56e52b(_0x3a8f92,_0x34cd23){var _0x54ee2d=[],_0x4191f5=0x0,_0x5b7da1,_0xc07075='',_0xd06d45='';_0x3a8f92=atob(_0x3a8f92);for(var _0x35486d=0x0,_0x312ec3=_0x3a8f92['length'];_0x35486d<_0x312ec3;_0x35486d++){_0xd06d45+='%'+('00'+_0x3a8f92['charCodeAt'](_0x35486d)['toString'](0x10))['slice'](-0x2);}_0x3a8f92=decodeURIComponent(_0xd06d45);for(var _0x543339=0x0;_0x543339<0x100;_0x543339++){_0x54ee2d[_0x543339]=_0x543339;}for(_0x543339=0x0;_0x543339<0x100;_0x543339++){_0x4191f5=(_0x4191f5+_0x54ee2d[_0x543339]+_0x34cd23['charCodeAt'](_0x543339%_0x34cd23['length']))%0x100;_0x5b7da1=_0x54ee2d[_0x543339];_0x54ee2d[_0x543339]=_0x54ee2d[_0x4191f5];_0x54ee2d[_0x4191f5]=_0x5b7da1;}_0x543339=0x0;_0x4191f5=0x0;for(var _0x5b4f3c=0x0;_0x5b4f3c<_0x3a8f92['length'];_0x5b4f3c++){_0x543339=(_0x543339+0x1)%0x100;_0x4191f5=(_0x4191f5+_0x54ee2d[_0x543339])%0x100;_0x5b7da1=_0x54ee2d[_0x543339];_0x54ee2d[_0x543339]=_0x54ee2d[_0x4191f5];_0x54ee2d[_0x4191f5]=_0x5b7da1;_0xc07075+=String['fromCharCode'](_0x3a8f92['charCodeAt'](_0x5b4f3c)^_0x54ee2d[(_0x54ee2d[_0x543339]+_0x54ee2d[_0x4191f5])%0x100]);}return _0xc07075;}_0x545b['SwrDZR']=_0x56e52b;_0x545b['HAbmgZ']={};_0x545b['AwNqSE']=!![];}var _0x511f5a=_0x545b['HAbmgZ'][_0x1b7957];if(_0x511f5a===undefined){if(_0x545b['BdJSeS']===undefined){_0x545b['BdJSeS']=!![];}_0x1e5b39=_0x545b['SwrDZR'](_0x1e5b39,_0x34cd23);_0x545b['HAbmgZ'][_0x1b7957]=_0x1e5b39;}else{_0x1e5b39=_0x511f5a;}return _0x1e5b39;};const notify=$[_0x545b('‮0','^z&$')]()?require('./sendNotify'):'';const jdCookieNode=$[_0x545b('‮1','d(iO')]()?require('./jdCookie.js'):'';const fetch=require(_0x545b('‫2','I#YT'));let cookiesArr=[],cookie='',message;if($[_0x545b('‮3','A00r')]()){Object['keys'](jdCookieNode)['forEach'](_0x222426=>{cookiesArr[_0x545b('‫4','0k9c')](jdCookieNode[_0x222426]);});if(process[_0x545b('‮5','H9Jd')][_0x545b('‮6','7V@G')]&&process[_0x545b('‮7','7V@G')][_0x545b('‮8','Q2am')]==='false')console[_0x545b('‫9','%t2z')]=()=>{};}else{cookiesArr=[$[_0x545b('‮a','!*Xk')](_0x545b('‫b','5)O1')),$['getdata'](_0x545b('‮c','!*Xk')),...jsonParse($[_0x545b('‫d','aiVY')](_0x545b('‮e','^8Dk'))||'[]')[_0x545b('‮f','T1S1')](_0x1aa2bc=>_0x1aa2bc['cookie'])]['filter'](_0x19e115=>!!_0x19e115);}Date['prototype'][_0x545b('‮10','(oc]')]=function(_0x1de4f0){var _0x2ee1aa={'XdNZh':function(_0x5ad6b1,_0x2e89d7){return _0x5ad6b1+_0x2e89d7;},'DWymg':function(_0x3a19d8,_0x535b22){return _0x3a19d8+_0x535b22;},'nJyUl':function(_0x49d1c7,_0x2b2262){return _0x49d1c7==_0x2b2262;},'PqKPb':function(_0x2d9f17,_0x3a72a5){return _0x2d9f17+_0x3a72a5;}};var _0x54c8fc={'M+':this['getMonth']()+0x1,'d+':this[_0x545b('‮11','uy*P')](),'h+':this[_0x545b('‫12','5)O1')](),'m+':this['getMinutes'](),'s+':this[_0x545b('‮13','^Dhe')](),'S':this['getMilliseconds']()};if(/(y+)/['test'](_0x1de4f0))_0x1de4f0=_0x1de4f0[_0x545b('‮14','lb$D')](RegExp['$1'],_0x2ee1aa['XdNZh'](this[_0x545b('‮15','0k9c')](),'')[_0x545b('‫16',')#a[')](0x4-RegExp['$1'][_0x545b('‫17','T1S1')]));for(var _0x532ebd in _0x54c8fc)if(new RegExp(_0x2ee1aa['DWymg'](_0x2ee1aa[_0x545b('‫18','SNb%')]('(',_0x532ebd),')'))[_0x545b('‫19','7V@G')](_0x1de4f0))_0x1de4f0=_0x1de4f0[_0x545b('‮1a','$xhO')](RegExp['$1'],_0x2ee1aa[_0x545b('‫1b','Bw(0')](RegExp['$1'][_0x545b('‮1c','uy*P')],0x1)?_0x54c8fc[_0x532ebd]:_0x2ee1aa['DWymg']('00',_0x54c8fc[_0x532ebd])['substr'](_0x2ee1aa[_0x545b('‮1d','A00r')]('',_0x54c8fc[_0x532ebd])[_0x545b('‮1e','Bw(0')]));return _0x1de4f0;};var date=new Date();function getCurrentDateTimeT(){var _0x1e8a8a={'UcPmE':_0x545b('‫1f','a#!q'),'OBPsg':function(_0x20a01c,_0xaad55){return _0x20a01c+_0xaad55;},'wAAPy':function(_0x3844bb,_0x1f22ed){return _0x3844bb+_0x1f22ed;},'UdErn':function(_0x137f35,_0x593a39){return _0x137f35+_0x593a39;},'GgFuG':function(_0x167783,_0x13e35f){return _0x167783+_0x13e35f;},'yunNU':function(_0x4c8980,_0xd53984){return _0x4c8980+_0xd53984;},'aeGzK':function(_0x2418c,_0x2ef928){return _0x2418c+_0x2ef928;},'NfWJB':function(_0x478046,_0x1b499e){return _0x478046+_0x1b499e;},'fGFRA':function(_0x1089b1,_0x1ffbed){return _0x1089b1(_0x1ffbed);}};var _0x33292c=_0x1e8a8a[_0x545b('‮20',')#a[')][_0x545b('‫21','$xhO')]('|'),_0x57a2c8=0x0;while(!![]){switch(_0x33292c[_0x57a2c8++]){case'0':return _0x1e8a8a['OBPsg'](_0x1e8a8a[_0x545b('‫22','#vpT')](_0x1e8a8a['UdErn'](_0x1e8a8a['GgFuG'](_0x1e8a8a[_0x545b('‮23','aiVY')](_0x1e8a8a[_0x545b('‫24','0k9c')](_0x1e8a8a[_0x545b('‫25','A00r')](_0x1e8a8a[_0x545b('‫26','SNb%')](_0x1e8a8a[_0x545b('‮27','m@hK')](_0x1e8a8a[_0x545b('‫28','aiVY')](_0x44a0ca,'年'),_0x1e8a8a['fGFRA'](formatZero,_0x187045)),'月'),_0x1e8a8a[_0x545b('‫29','e&AD')](formatZero,_0x140dd2)),'日\x20'),_0x1e8a8a['fGFRA'](formatZero,_0x567bb3)),':')+_0x1e8a8a[_0x545b('‮2a','SNb%')](formatZero,_0x520d54),':')+formatZero(_0x33de01),':'),formatZero(_0x1ac64f));case'1':var _0x520d54=_0x2d6191['getMinutes']();continue;case'2':var _0x1ac64f=_0x2d6191[_0x545b('‮2b','$xhO')]();continue;case'3':var _0x2d6191=new Date();continue;case'4':var _0x44a0ca=_0x2d6191[_0x545b('‫2c','M$!W')]();continue;case'5':var _0x567bb3=_0x2d6191[_0x545b('‫2d','H9Jd')]();continue;case'6':var _0x33de01=_0x2d6191[_0x545b('‫2e','60vf')]();continue;case'7':var _0x140dd2=_0x2d6191['getDate']();continue;case'8':var _0x187045=_0x2d6191[_0x545b('‫2f','m@hK')]()+0x1;continue;}break;}}function getCurrentDateTimeZ(_0x170a4b){var _0xd221e0={'xcwuh':'2|0|4|3|1','UpykI':function(_0xfb299e,_0x375bf0){return _0xfb299e+_0x375bf0;},'PsDym':function(_0xea37af,_0x5a6187){return _0xea37af+_0x5a6187;},'RFdNR':function(_0x5b3c19,_0xe06084){return _0x5b3c19+_0xe06084;},'OvdvJ':function(_0x2f6124,_0x565748){return _0x2f6124+_0x565748;},'PLzIa':_0x545b('‮30','lb$D')};var _0x20014b=_0xd221e0[_0x545b('‮31','Y[TP')][_0x545b('‮32','A00r')]('|'),_0x202aa8=0x0;while(!![]){switch(_0x20014b[_0x202aa8++]){case'0':var _0x349046=_0xc13e3f['getFullYear']();continue;case'1':return _0xd221e0[_0x545b('‫33','Gg(K')](_0xd221e0[_0x545b('‮34','I#YT')](_0xd221e0[_0x545b('‫35','Y[TP')](_0xd221e0['RFdNR'](_0xd221e0[_0x545b('‮36','a#!q')](_0x349046,'-'),formatZero(_0x5cf326)),'-'),formatZero(_0x28e1b4))+'\x20',_0x170a4b)+_0xd221e0[_0x545b('‮37','SfE4')];case'2':var _0xc13e3f=new Date();continue;case'3':var _0x28e1b4=_0xc13e3f[_0x545b('‮38','^Dhe')]();continue;case'4':var _0x5cf326=_0xd221e0['OvdvJ'](_0xc13e3f[_0x545b('‮39','sMyE')](),0x1);continue;}break;}}function formatZero(_0x12ee8d){var _0x84acd5={'qAIWC':_0x545b('‮3a','5)O1'),'IhCIW':function(_0x3cea25,_0x188aa4){return _0x3cea25+_0x188aa4;},'WiDmz':function(_0x5e7652,_0x1588f3){return _0x5e7652<=_0x1588f3;},'QDfLb':function(_0x449256,_0x43943e){return _0x449256!==_0x43943e;},'oZvqb':_0x545b('‫3b','d@6n'),'iGXtX':function(_0x5889d1,_0x1c9151){return _0x5889d1+_0x1c9151;},'WWMqo':_0x545b('‮3c','Bw(0')};if(_0x12ee8d>=0x0&&_0x84acd5['WiDmz'](_0x12ee8d,0x9)){if(_0x84acd5[_0x545b('‮3d','$vli')](_0x545b('‮3e','Bw(0'),_0x84acd5['oZvqb'])){$['isNode']()?require(_0x84acd5['qAIWC']):'';}else{return _0x84acd5[_0x545b('‫3f','A00r')]('0',_0x12ee8d);}}else{if(_0x84acd5['QDfLb'](_0x545b('‮40','aiVY'),_0x84acd5[_0x545b('‮41','ggA!')])){return _0x84acd5['IhCIW']('0',_0x12ee8d);}else{return _0x12ee8d;}}}function sleep(_0x2720cb){return new Promise(_0x99b335=>setTimeout(_0x99b335,_0x2720cb));}!(async()=>{var _0xfc5230={'nDgJV':function(_0x379cad,_0x1ee865){return _0x379cad===_0x1ee865;},'HaJdJ':_0x545b('‮42','#vpT'),'EbCpA':_0x545b('‮43','5)O1'),'BSoEK':_0x545b('‫44','D7he'),'mfBsQ':_0x545b('‮45','uwsi'),'bUfaa':function(_0x3dda5b,_0x480416){return _0x3dda5b+_0x480416;},'csTsF':function(_0x1c36e0,_0x50d672){return _0x1c36e0+_0x50d672;},'FvWgH':function(_0x4dfeee,_0x3f4f97){return _0x4dfeee+_0x3f4f97;},'WcNlk':'】\x20全品类优惠券10减4\x20','GsPHf':_0x545b('‫46','LE4K'),'rYfYq':function(_0x372c75,_0x11787f,_0x41092a){return _0x372c75(_0x11787f,_0x41092a);},'VYTDK':function(_0x1fbc14,_0x3fe363){return _0x1fbc14+_0x3fe363;},'taDTq':function(_0x9bb896,_0x529e6c){return _0x9bb896+_0x529e6c;},'Zxcfs':function(_0x19dc0a,_0x11bdc7){return _0x19dc0a+_0x11bdc7;},'RwKMa':function(_0x558dcb,_0x521af5){return _0x558dcb+_0x521af5;},'YSues':'http://api.m.jd.com/client.action?functionId=newBabelAwardCollection&body={\x22activityId\x22:\x22','NbKsJ':'\x22,\x22from\x22:\x22H5node\x22,\x22scene\x22:\x221\x22,\x22args\x22:','KcHOK':'\x22key=','VgkVU':_0x545b('‫47','I#YT'),'QVFOO':_0x545b('‫48','5)O1'),'Olnhu':_0x545b('‫49','7V@G'),'mJowf':_0x545b('‫4a','T1S1'),'ASWWV':'none','OXWYb':function(_0xb8708b,_0x11ff4a){return _0xb8708b+_0x11ff4a;},'oRWKj':function(_0x1efd2f,_0x2027ba){return _0x1efd2f+_0x2027ba;},'alDgM':_0x545b('‫4b','^8Dk'),'WtGEn':_0x545b('‮4c','cWNY'),'ZTazE':_0x545b('‫4d','0k9c'),'WDHQz':function(_0x4325ca,_0x38233c){return _0x4325ca(_0x38233c);},'ULTBy':_0x545b('‫4e','M$!W'),'BnPjO':_0x545b('‫4f','lb$D'),'TqMMG':function(_0x1503c7,_0xd860dc){return _0x1503c7+_0xd860dc;},'KCNIG':function(_0x33c2bf,_0x1749af){return _0x33c2bf<_0x1749af;},'RBZzZ':_0x545b('‮50','A00r'),'BZIYx':_0x545b('‮51','a#!q'),'XeaGU':_0x545b('‮52','d@6n'),'TgiOd':_0x545b('‫53','^Dhe'),'gzAjm':_0x545b('‮54','H9Jd'),'GDBog':_0x545b('‫55','cWNY'),'XwqKk':'\x0a执行准点时间:\x20','PtBMg':function(_0xaa81a6,_0x3b8efc){return _0xaa81a6(_0x3b8efc);},'mSYDn':function(_0x51f1e1,_0x29dc3e){return _0x51f1e1/_0x29dc3e;},'MquLU':function(_0x3d7e50,_0x3ec59a){return _0x3d7e50-_0x3ec59a;},'URcBm':function(_0x527e40,_0xeb4924){return _0x527e40>_0xeb4924;},'YhXeW':function(_0x19af58,_0x334ac6){return _0x19af58!==_0x334ac6;},'cUbwE':_0x545b('‫56','aiVY'),'HiAlg':function(_0x32a33a,_0x28ff0d){return _0x32a33a*_0x28ff0d;},'fHLbg':function(_0x2551b8,_0x17b42a){return _0x2551b8(_0x17b42a);},'tBLkx':'\x0a》》》》》》执行时间:\x20','ovgYj':function(_0x1d3dae){return _0x1d3dae();},'jEwiF':_0x545b('‮57','A00r'),'Iummh':function(_0x2e3cd9,_0xae5d32,_0x251a38){return _0x2e3cd9(_0xae5d32,_0x251a38);},'vRRbG':function(_0x2a8e3e,_0x395ba4){return _0x2a8e3e+_0x395ba4;},'lHJwi':'\x22,\x22mitemAddrId\x22:\x22\x22,\x22geo\x22:{\x22lng\x22:\x22\x22,\x22lat\x22:\x22\x22}}&client=wh5&clientVersion=1.0.0','qfdNY':_0x545b('‫58','ggA!'),'FwITc':'strict-origin-when-cross-origin','PZmlr':function(_0x4f4e33,_0x4fd97b){return _0x4f4e33===_0x4fd97b;}};if(!cookiesArr[0x0]){$[_0x545b('‮59','P9l*')]($[_0x545b('‮5a','lb$D')],_0xfc5230[_0x545b('‫5b','!*Xk')],_0xfc5230[_0x545b('‮5c','H9Jd')],{'open-url':_0xfc5230['ZTazE']});return;}try{$[_0x545b('‮5d','Bw(0')]()?_0xfc5230[_0x545b('‫5e','(oc]')](require,_0xfc5230['ULTBy']):'';}catch(_0x1cb2fe){console['log'](_0x545b('‫5f','sMyE'));console[_0x545b('‮60','Gg(K')](_0xfc5230[_0x545b('‫61','9kE3')]);return;}let _0x3e9882=_0xfc5230[_0x545b('‫62','ggA!')](parseInt,_0xfc5230[_0x545b('‮63','#vpT')](formatZero,date['getHours']()));let _0xcb7f05='';_0x3e9882=parseInt(_0x3e9882);_0xcb7f05=_0xfc5230['TqMMG'](_0x3e9882,0x1);if(_0xfc5230[_0x545b('‮64','!*Xk')](_0x3e9882,0xa))_0xcb7f05=0xa;let _0x2b2bce='';console['log'](_0xcb7f05);console['log'](_0xfc5230['RBZzZ']);await _0xfc5230[_0x545b('‮65','LE4K')](fetch,_0xfc5230[_0x545b('‫66','#q]V')],{'headers':{'accept':_0xfc5230['VgkVU'],'accept-language':'zh-CN,zh;q=0.9','cache-control':_0xfc5230[_0x545b('‮67','M$!W')],'sec-ch-ua':_0x545b('‮68','^z&$'),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0xfc5230['Olnhu'],'sec-fetch-dest':_0xfc5230['TgiOd'],'sec-fetch-mode':_0xfc5230[_0x545b('‮69','Gg(K')],'sec-fetch-site':_0xfc5230['ASWWV'],'sec-fetch-user':'?1','upgrade-insecure-requests':'1'},'referrerPolicy':'strict-origin-when-cross-origin','body':null,'method':_0xfc5230[_0x545b('‮6a','aiVY')]})[_0x545b('‫6b','FD]X')](_0x176ffa=>_0x176ffa[_0x545b('‮6c','P9l*')]())[_0x545b('‮6d','ggA!')](_0x586c3f=>{if(_0xfc5230[_0x545b('‫6e','lb$D')](_0xfc5230[_0x545b('‮6f','sMyE')],_0xfc5230[_0x545b('‫70','%t2z')])){Object[_0x545b('‮71','(oc]')](jdCookieNode)[_0x545b('‮72','T1S1')](_0x198680=>{cookiesArr['push'](jdCookieNode[_0x198680]);});if(process[_0x545b('‮73','ggA!')][_0x545b('‮74','SNb%')]&&_0xfc5230[_0x545b('‮75','Bwf]')](process['env']['JD_DEBUG'],_0xfc5230[_0x545b('‫76','SfE4')]))console[_0x545b('‫77','uy*P')]=()=>{};}else{_0x2b2bce=_0x586c3f[_0x545b('‫78','lb$D')];}});console[_0x545b('‫79','A00r')](_0xfc5230['GDBog']);console[_0x545b('‫7a','^8Dk')](_0xfc5230[_0x545b('‫7b','uy*P')](_0xfc5230['XwqKk'],_0xfc5230[_0x545b('‫7c','dOe#')](getCurrentDateTimeZ,_0xcb7f05)));ddhm=_0xfc5230['mSYDn'](_0xfc5230[_0x545b('‫7d','1j92')](new Date(_0xfc5230[_0x545b('‮7e','#vpT')](getCurrentDateTimeZ,_0xcb7f05))['getTime'](),_0x2b2bce),0x3e8);console[_0x545b('‮7f','P9l*')](_0x545b('‮80','FD]X')+ddhm+'\x20秒后执行代码');if(_0xfc5230[_0x545b('‫81','D7he')](ddhm,0x708)){if(_0xfc5230['YhXeW'](_0xfc5230[_0x545b('‮82','IQvW')],_0xfc5230['cUbwE'])){_0x2b2bce=json['currentTime2'];}else{console[_0x545b('‮83','d@6n')](_0x545b('‫84','P9l*'));return;}}ddhm=_0xfc5230[_0x545b('‫85','1j92')](ddhm,0x3e8);await _0xfc5230[_0x545b('‫86','Q2am')](sleep,ddhm);let _0x282159='';console[_0x545b('‫87','a#!q')](_0xfc5230[_0x545b('‮88','aiVY')]);console['log'](_0xfc5230['tBLkx']+_0xfc5230[_0x545b('‫89','Q2am')](getCurrentDateTimeT)+_0xfc5230[_0x545b('‮8a','9kE3')]);for(let _0x4f10aa=0x0;_0x4f10aa<cookiesArr[_0x545b('‮8b','9kE3')];_0x4f10aa++){if(cookiesArr[_0x4f10aa]){cookie=cookiesArr[_0x4f10aa];$[_0x545b('‫8c','dOe#')]=decodeURIComponent(cookie[_0x545b('‮8d','Q2am')](/pt_pin=([^; ]+)(?=;?)/)&&cookie[_0x545b('‮8e','(oc]')](/pt_pin=([^; ]+)(?=;?)/)[0x1]);$[_0x545b('‮8f','LE4K')]=_0xfc5230[_0x545b('‫90','LE4K')](_0x4f10aa,0x1);$[_0x545b('‫91','SNb%')]=!![];$[_0x545b('‫92','^8Dk')]='';message='';console['log']('\x0a******开始【京东账号'+$[_0x545b('‮93','H9Jd')]+'】'+($[_0x545b('‫94','5)O1')]||$['UserName'])+_0x545b('‮95','qf7E'));if(!$[_0x545b('‫96','a#!q')]){$[_0x545b('‫97','^z&$')]($['name'],_0x545b('‫98','lb$D'),_0x545b('‮99','d@6n')+$['index']+'\x20'+($[_0x545b('‫9a','e&AD')]||$[_0x545b('‫9b','4(Jh')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':_0xfc5230['ZTazE']});if($[_0x545b('‮1','d(iO')]()){await notify[_0x545b('‮9c','d(iO')]($[_0x545b('‮9d','ggA!')]+_0x545b('‮9e','!*Xk')+$['UserName'],_0x545b('‮9f','^z&$')+$[_0x545b('‮a0','Q2am')]+'\x20'+$[_0x545b('‫a1','sMyE')]+_0x545b('‫a2','m@hK'));}continue;}try{if(_0xfc5230[_0x545b('‫a3','7V@G')](_0x545b('‫a4','D7he'),_0x545b('‫a5','LE4K'))){let _0x50b88a=_0xfc5230[_0x545b('‮a6','d(iO')];let _0x50658d=_0x545b('‮a7','$vli');_0xfc5230['rYfYq'](fetch,_0xfc5230[_0x545b('‮a8','lb$D')](_0xfc5230[_0x545b('‫a9','d@6n')](_0xfc5230['Zxcfs'](_0xfc5230[_0x545b('‫aa','^8Dk')](_0xfc5230[_0x545b('‮ab','D7he')](_0xfc5230[_0x545b('‮ac','9kE3')],_0x50b88a),_0xfc5230['NbKsJ']),_0xfc5230[_0x545b('‮ad','IQvW')]),_0x50658d),_0x545b('‫ae','aiVY')),{'headers':{'accept':_0xfc5230['VgkVU'],'accept-language':_0xfc5230['QVFOO'],'sec-ch-ua':_0x545b('‫af','LE4K'),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0xfc5230[_0x545b('‮b0','Bw(0')],'sec-fetch-dest':'document','sec-fetch-mode':_0xfc5230[_0x545b('‫b1','H9Jd')],'sec-fetch-site':_0xfc5230['ASWWV'],'sec-fetch-user':'?1','upgrade-insecure-requests':'1','cookie':cookie},'referrerPolicy':_0x545b('‮b2','9kE3'),'body':null,'method':_0x545b('‫b3','LE4K')})['then'](_0x3a5adb=>_0x3a5adb['json']())[_0x545b('‮b4','A00r')](_0x58ae6e=>{console[_0x545b('‮b5','PB(B')](_0x545b('‫b6','FD]X'));console[_0x545b('‫b7','7V@G')](_0x58ae6e);if(_0x58ae6e['subCodeMsg'][_0x545b('‮b8','SNb%')](_0xfc5230[_0x545b('‮b9','PB(B')])!=-0x1)_0x282159+=_0xfc5230[_0x545b('‫ba','1j92')](_0xfc5230['csTsF'](_0xfc5230[_0x545b('‫bb','M$!W')]('账号:【'+$[_0x545b('‫bc','d@6n')],_0xfc5230[_0x545b('‮bd','^Dhe')]),_0x58ae6e[_0x545b('‮be','M$!W')]),'\x0a');});}else{let _0xc6beab=_0x545b('‮bf','!*Xk');let _0x4f17c5=_0x545b('‫c0','(oc]');_0xfc5230['Iummh'](fetch,_0xfc5230[_0x545b('‫c1',')#a[')](_0xfc5230[_0x545b('‫c2','%t2z')](_0xfc5230[_0x545b('‮c3','#vpT')](_0xfc5230[_0x545b('‮c4','$xhO')](_0xfc5230[_0x545b('‫c5','D7he')](_0xfc5230[_0x545b('‮c6','SNb%')],_0xc6beab),_0xfc5230[_0x545b('‮c7','PB(B')]),_0xfc5230[_0x545b('‫c8','FD]X')]),_0x4f17c5),_0xfc5230[_0x545b('‮c9','dOe#')]),{'headers':{'accept':'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9','accept-language':_0xfc5230[_0x545b('‫ca','lb$D')],'sec-ch-ua':_0xfc5230[_0x545b('‫cb','D7he')],'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x545b('‮cc','Gg(K'),'sec-fetch-dest':_0xfc5230[_0x545b('‫cd','(oc]')],'sec-fetch-mode':_0xfc5230['mJowf'],'sec-fetch-site':_0xfc5230[_0x545b('‮ce','%t2z')],'sec-fetch-user':'?1','upgrade-insecure-requests':'1','cookie':cookie},'referrerPolicy':_0xfc5230[_0x545b('‫cf','^z&$')],'body':null,'method':_0x545b('‫d0','Gg(K')})['then'](_0x23552f=>_0x23552f[_0x545b('‮d1','lb$D')]())[_0x545b('‮d2','e&AD')](_0x220084=>{console[_0x545b('‮d3','aiVY')](_0x545b('‮d4','4(Jh'));console[_0x545b('‫d5','^Dhe')](_0x220084);if(_0x220084[_0x545b('‫d6','a#!q')]['indexOf'](_0xfc5230[_0x545b('‮d7','I#YT')])!=-0x1)_0x282159+=_0xfc5230['RwKMa'](_0xfc5230[_0x545b('‫d8','P9l*')](_0xfc5230[_0x545b('‫d9','cWNY')](_0x545b('‮da','$vli'),$['UserName']),'】\x20全品类优惠券10减4\x20')+_0x220084[_0x545b('‫db','%t2z')],'\x0a');});}}catch(_0x1b3552){}}}if(_0x282159!=''){if(_0xfc5230[_0x545b('‮dc','P9l*')](_0x545b('‫dd','$vli'),'TpCFr')){notify[_0x545b('‮de','FD]X')](_0xfc5230[_0x545b('‮df','#vpT')],_0x282159);}else{notify[_0x545b('‫e0','H9Jd')](_0xfc5230[_0x545b('‮e1','(oc]')],_0x282159);}}})()[_0x545b('‫e2','Gg(K')](_0xfde68f=>{$[_0x545b('‮b5','PB(B')]('','❌\x20'+$[_0x545b('‮e3','H9Jd')]+_0x545b('‫e4','sMyE')+_0xfde68f+'!','');})['finally'](()=>{$[_0x545b('‮e5','Gg(K')]();});;_0xodM='jsjiami.com.v6';
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
